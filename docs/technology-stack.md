### **1. Ядро (Backend, обработка событий)**

* **PHP 8.4**
  Используется для реализации микросервисов, асинхронной обработки через Swoole, написания бизнес-логики.
* **Swoole**
  Позволяет создавать асинхронные сервисы и высокопроизводительные long-running worker’ы (воркеры-обработчики событий), реализуя event-driven архитектуру.
* **Composer**
  Управляет зависимостями, автозагрузкой и организацией кода.

---

### **2. Система обмена событиями**

* **RabbitMQ**
  Промышленный брокер событий (очередь), обеспечивает гарантированную доставку, подтверждение обработки, поддержку различных exchange (fanout, topic и др.).
* **AMQP-клиент для PHP**
  (например, [php-amqplib/php-amqplib](https://github.com/php-amqplib/php-amqplib)) — обеспечивает интеграцию микросервисов с RabbitMQ.

---

### **3. Хранение данных**

* **PostgreSQL**
  Хранение бизнес-данных, логов аудита, статистики и результатов сверок.
* **Миграции**
  Для версионирования схемы БД, могут быть независимыми для каждого микросервиса (при необходимости отдельной БД).

---

### **4. Докеризация и DevOps**

* **Docker**
  Контейнеризация каждого сервиса (микросервисы, RabbitMQ, PostgreSQL).
* **Docker Compose**
  Оркестрация мультисервисной среды, централизованный запуск, настройка сетей и томов.
* **Makefile**
  Упрощает управление командами сборки, тестирования и запуска окружения.

---

### **5. Мониторинг и логирование**

* **Log-файлы**
  (psr/log, monolog) — базовое логирование во всех сервисах.
* **Healthchecks**
  REST endpoint'ы или простые файлы для проверки статуса сервисов, интеграции с CI/CD и балансировщиками.
* **Prometheus + Grafana**
  Для продвинутого мониторинга метрик сервисов, очереди, БД (опционально, для production-уровня).

---

### **6. Вспомогательное ПО**

* **OpenAPI (Swagger)**
  Документация REST API генератора, аналитики, мониторинга.
* **Postman/Insomnia**
  Ручное тестирование и отладка REST API.
* **PHPUnit**
  Unit- и интеграционное тестирование.
* **phpstan, Psalm**
  Статический анализ кода для обеспечения качества и типобезопасности.

---

### **7. (Опционально)**

* **Web UI / CLI-панель мониторинга**
  Веб-интерфейс (например, на Vue.js) или CLI для мониторинга событий и сервисов.
* **NGINX**
  Для публикации REST API и балансировки, если необходим внешний доступ или frontend.
* **MailHog/Fake SMTP**
  Имитация рассылки писем Notification Service’ом в dev-среде.

---

### **Структура репозитория**

* `/docker/` — Dockerfiles и скрипты для сборки сервисов
* `/services/{service_name}/` — исходный код микросервисов
* `/common/` — общие библиотеки, Value Objects, контракты
* `/db/` — миграции, инициализационные скрипты БД
* `docker-compose.yml` — централизованный запуск всех сервисов
* `Makefile` — сокращения для разработки, тестирования, деплоя

---

### **Минимум для старта**

* PHP 8.4 + Swoole
* RabbitMQ
* PostgreSQL
* Docker + Docker Compose
* Composer (зависимости)
* PHPUnit (тесты)
* psr/log или monolog (логирование)
* Makefile

**Для продвинутого мониторинга:**

* (опционально) Prometheus + Grafana
